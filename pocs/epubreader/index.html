<!DOCTYPE html> 
<html lang="en"> 
	<head> 
    	<title>EPub Importer</title> 
		<meta
		      name="viewport"
		      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
		    />
    	<script type="text/javascript" src="js-epub/js-epub.js"></script>
    	<script type="text/javascript" src="js-epub/vendor/js-unzip/js-unzip.js"></script>
    	<script type="text/javascript" src="js-epub/vendor/js-inflate/js-inflate.js"></script>
		<script type="text/javascript" src="js/ebookdownloader.js"></script>
  	</head> 
  	<body> 
    	<input type="text" id="epub" name="epub" size="100" /><input type="button" name="click" id="click" value="Fetch!" />
		<script type="text/javascript">
			function fetch() {
				var downloader = new owd.eBookDownloader();
				var url = document.getElementById('epub').value;
				
				downloader.download(url, function(metadata) { 
					alert('Book ' + metadata.title + ' downloaded')
					document.getElementById('reader').innerHTML = localStorage[metadata.id];
				},
				function(msg) {
					alert("Error: " + msg);
				})
			}
			
			
			document.getElementById('click').addEventListener('click', fetch, false);
		</script>
		<div id="reader">
		</div>
  </body> 
</html>